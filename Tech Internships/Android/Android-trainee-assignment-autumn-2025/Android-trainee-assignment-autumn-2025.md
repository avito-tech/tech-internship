# Тестовое задание для стажёра Android (осенняя волна 2025)

## **Описание задачи:**

Реализовать приложение для скачивания и чтения книг, которое состоит из следующих экранов:

- Экран авторизации/регистрации  
- Экран скачанных книг  
- Экран загрузки книг  
- Экран чтения книги  
- Экран профиля
- Навигация

Использование ИИ разрешено в переработанном виде. При выявлении ИИ при проверке задания на следующих этапах отбора вам необходимо будет пояснить необходимость его использования и ответить на уточняющие вопросы интервьюера.

Если у вас наблюдаются проблемы с использованием Firebase Authentication или Firebase Storage, можно использовать Yandex Cloud Object Storage - полностью подходит и доступен без ограничений.
В задании можно комбинировать инструменты: аутентификация в Firebase, файлы в Яндекс.Cloud.

## **Экран входа (логина)**

Экран авторизации пользователя через Firebase Authentication. Позволяет войти в систему с помощью email и пароля (или через Google-аккаунт, опционально).

### **Состав экрана**

**AppBar / верхняя панель**  
- Заголовок: «Вход в аккаунт»  
- Кнопка «Регистрация»  

**Основная область входа**  
- Поля ввода:  
  - Email  
  - Пароль  
  
- Кнопка «Войти»  
  - При нажатии запускает процесс авторизации через FirebaseAuth  
  - При успешном входе происходит навигация на главный экран (список книг)  
  - При ошибке — показ Snackbar с текстом ошибки  

- Состояние загрузки: 
  - При выполнении входа кнопка блокируется, вместо текста показывается индикатор загрузки  

- Поддержка автологина:
  - При повторном запуске проверяется FirebaseAuth.getCurrentUser()  
  - Если пользователь уже вошёл, сразу переход на главный экран  

### **Состояния экрана:**

- Idle — форма доступна для ввода  
- Loading – выполняется вход  
- Error – ошибка входа, показывается сообщение  
- Success – переход на следующий экран  

### **Примечания**

- Валидация email и пароля до отправки формы  
- Ошибки Firebase отображаются пользователю  
- В случае отсутствия сети сообщение об ошибке с кнопкой «Повторить»  
- Поддержка светлой и тёмной темы  
- Возможность регистрации нового пользователя  

### **Дополнительно (опционально)**

- Добавить анимацию появления формы входа  
- Добавить вход через Google  
- Анимация логотипа приложения при запуске (Splash-экран)  
- Подсказки и переход фокуса между полями клавиатурой  
- Состояние “remember me” или авто-вход  

## **Экран загрузки книги (файла)**

Экран, позволяющий пользователю выбрать и загрузить книгу в формате .txt, .epub или .pdf в Firebase Storage, а также добавить метаданные в Firestore.

### **Состав экрана**

**AppBar / верхняя панель**  
- Заголовок: «Загрузка книги»  

**Основная область загрузки**

- Поле для выбора файла  
  - Кнопка «Выбрать файл» открывает системный выбор  
  - Отображается имя выбранного файла  

- Поля ввода:  
  - Название книги  
  - Автор  

- Кнопка «Загрузить»  
  - Начинает загрузку файла в Firebase Storage  
  - Отображается прогрессбар  

- Состояния загрузки:
  - Idle – ожидание ввода данных  
  - Uploading – показывается прогресс (%)  
  - Success – сообщение «Книга успешно загружена»  
  - Error – сообщение об ошибке и кнопка «Повторить»  

### **Интеграция с Firebase**

**Firebase Storage:**  
- Загрузка выбранного файла по Uri  
- Отслеживание прогресса через addOnProgressListener  

**Firestore:**  
После успешной загрузки создаётся документ:

```json
{
  "title": "Мастер и Маргарита",
  "author": "М. Булгаков",
  "fileUrl": "https://firebasestorage.googleapis.com/...",
  "userId": "uid123"
}
```

После добавления документа обновляется список скачанных книг.

### **Примечания**

- Поддерживаются только .txt, .epub, .pdf файлов (валидация перед загрузкой)
- При отсутствии сети отображается ошибка и кнопка «Повторить»  
- После успешной загрузки книга автоматически появляется в списке скачанных  
- Добавить локальное сохранение файла (через FileOutputStream)  
- Обработка ошибки загрузки  
- Поддержка светлой и тёмной темы  

### **Дополнительно (опционально)**

- Анимация прогресса загрузки  
- Lottie-анимация успеха  
- Кеширование локальных файлов  
- Фоновая загрузка через WorkManager (для устойчивости при потере сети)  
- Анимация появления полей и кнопок  

## **Экран скачанных книг**

Экран отображает все книги, которые пользователь скачал или загрузил ранее. Реализует локальное хранение файлов и синхронизацию с Firestore для отображения актуального списка доступных книг.

### **Экран:**

**AppBar / верхняя панель**  
- Заголовок: «Мои книги»
- Поле поиска с placeholder: «Поиск книг…»  

**Область списка книг**

- Реализуется через LazyColumn (Jetpack Compose) или RecyclerView
- Отображает список всех локально сохранённых книг пользователя
- Поддерживает поиск по названию и автору
- Вертикальная прокрутка, адаптация под длинные списки

**Состояния списка**

- Есть книги – показывается список с обложками, названиями и авторами.
- Нет книг – заглушка
- Ничего не найдено при фильтре: «Ничего не найдено»
- Ошибка загрузки данных – кнопка «Повторить»
 
**Элемент списка книги**

- Миниатюра обложки (или placeholder, если обложки нет)
- Название книги
- Автор
- Иконка справа:
  - Если книга скачана локально – иконка корзины (удалить)
  - Если книга есть в Firestore, но не скачана – иконка загрузки (облако со стрелкой вниз)
- По клику на элемент открывается экран чтения книги
- По клику на иконку справа:
  - Удалить – удаляет файл с устройства и обновляет список
  - Загрузить – скачивает файл из Firebase Storage и сохраняет в локальное хранилище
  - После действия показывается Toast с результатом («Файл удалён», «Книга загружена»)
  

### **Интеграция с Firebase**

**Firestore**  
- При открытии экрана запрашивается список книг пользователя
- Сравниваются данные Firestore и локальных файлов
- Для отсутствующих локально книг отображается кнопка «Загрузить»
 
**Firebase Storage**  
- При нажатии «Загрузить» файл скачивается локально
- Прогресс скачивания может отображаться через прогресс-индикатор
- После успешного скачивания обновляется локальный список книг

### **Примечания**

- Поиск осуществляется локально по уже скачанным книгам
- Удаление книги из локального хранилища делает её недоступной для чтения
- При повторном входе список восстанавливается из локальных данных
- Возможность обновления списка из Firestore для синхронизации новых книг
- Поддержка светлой и тёмной темы


### **Дополнительно (опционально)**

- Анимации элементов списка:
  - Плавное появление карточек книг при загрузке
  - Анимация удаления (свайп влево с Dismissible)
- Pull-to-refresh для обновления списка
- Lottie-анимации для пустых состояний («нет книг», «ничего не найдено»)
- Drag & Drop сортировка (по названию или дате добавления)
- Кеширование данных через Room, чтобы экран загружался мгновенно без ожидания

## **Экран чтения книги**
Экран просмотра содержимого скачанной книги. Формат книги — .txt, .epub или .pdf

### **Состав экрана**

- **AppBar**  
  - Кнопка «Назад»
  - Название книги
  - Кнопка «АА» (для настройки отображения)

- **Основная область**
  - Прокручиваемый текст, поддержка больших файлов
  - Сохранение текущей позиции чтения (локально, например SharedPreferences)
  - Поддержка светлой / темной темы (минимум)
 
- **Панель управления чтением**

По тапу на кнопку «АА», открывается шторка с настройками, в которой следует реализовать:
  - Управление размерами шрифта (минимум 3 размера)
  - Выбор интервала между строками (опционально)
  - Переключение темы: Светлая, Тёмная и т д

- **Индикатор прогресса**
  - Внизу полоска или проценты: «45% прочитано»


**Примечания**
- При удалении локального файла книга больше не должна открываться и отображаться в списке
- При возникновении ошибки во время открытия книги — показываем ошибку и кнопку «Удалить» (либо попробовать снова открыть)


## **Экран скачанных книг**

### **Экран состоит из следующих компонентов:**

- **AppBar / Toolbar**  
  - Заголовок: «Мои книги»  

- **Поля поиска** 
  - Поиск по названию и автору
  - Поиск происходит локально среди скачанных книг
  - Показывается placeholder: «Поиск книг…»
  - При пустом вводе отображается весь список
- **Списка скачанных книг** 
  - Реализовать с помощью RecyclerView
  - Вертикальная прокрутка
  - Состояния списка:
    - Книги есть → отображаем список
    - Нет книг → отображаем заглушку: «У вас пока нет скачанных книг»
    - Ничего не найдено по поиску → «Ничего не найдено»

**Элемент списка состоит из:**
  - Обложки (картинка книги)
  - Названия
  - Автора
  - Иконки справа

**Действия со списком:**
- По клику на элемент списка (саму книгу) пользователь открывает её
- По клику на иконку справа пользователь удаляет её (то есть скачанный файл) и после успешного либо при ошибке появляется тост с текстом
- При открытии экрана запрашивается список книг пользователя из Firestore
  - Если в облаке есть книги, которые не скачаны локально → отображаем кнопку загрузки рядом

## **Экран профиля**

Предоставить пользователю возможность просматривать и редактировать базовую информацию своего аккаунта, привязанного к Firebase Authentication.

### **Состав экрана**

- AppBar
- Заголовок: «Профиль»
- Фото пользователя (если нет, показываем заглушку)
- Круглый аватар по центру
- Если фото нет → заглушка с иконкой пользователя
- Информация о пользователе 
- Кнопка выхода из аккаунта

**При клике на фото:**
- Открыть системный выбор изображения (галерея / камера — опционально)
- После выбора: загрузить изображение в приложение и в Firebase

**Информация о пользователе:**
- Отображаем данные, доступные в FirebaseAuth:
  - Имя пользователя
  - Email
  - Телефон, если учётная запись телефонная 

**Режимы отображения:**
- Минимум: поля только для просмотра
- Опционально: возможность редактирования имени и фото

**Кнопки и действия:**
- «Выйти из аккаунта» - разлогинить и перенаправить на экран Auth (обязательно реализовать)

**Опционально**
- Редактировать» / «Сохранить» (если нужно редактирование)

### **Навигация**
Для навигации используем BottomNavigation, для этого советуем использовать Navigation Component.

BottomNavigation состоит из 3-х кнопок:
- Первая ведёт на экран списка книг
- Вторая на экран загрузки книги
- Третья на экран профиля

