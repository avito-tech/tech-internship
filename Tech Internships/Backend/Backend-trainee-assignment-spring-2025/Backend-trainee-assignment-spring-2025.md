# Тестовое задание для стажёра Backend-направления (весенняя волна 2025)

## Сервис для работы с ПВЗ

На ПВЗ несколько раз в день привозят новые товары, которые были заказаны через Авито. Прежде чем их отдавать заказчику, необходимо сначала проверить и внести информацию в базу. Из-за того, что ПВЗ много, а товаров ещё больше, нужно реализовать механизм, позволяющий в разрезе каждого ПВЗ увидеть, сколько раз в день к ним приезжали товары на приёмку и какие товары были получены.

## Описание задачи

Разработайте backend-сервис для сотрудников ПВЗ, который позволит вносить информацию по заказам в рамках приёмки товаров.

1. Авторизация пользователей:
   * Используя ручку /dummyLogin и передав в неё желаемый тип пользователя (client, moderator),
     сервис в ответе вернёт токен с соответствующим уровнем доступа — обычного пользователя или модератора.
     Этот токен нужно передавать во все endpoints, требующие авторизации.

2. Регистрация и авторизация пользователей по почте и паролю:
   * При регистрации используется endpoint /register. 
   В базе создаётся и сохраняется новый пользователь желаемого типа: обычный пользователь (client) или модератор (moderator).
   У созданного пользователя появляется токен endpoint /login. 
   При успешной авторизации по почте и паролю возвращается токен для пользователя с соответствующим ему уровнем доступа.

3. Заведение ПВЗ:
   * Только пользователь с ролью «модератор» может завести ПВЗ в системе.
   * В случае успешного запроса возвращается полная информация о созданном ПВЗ. Заведение ПВЗ возможно только в трёх городах: Москва, Санкт-Петербург и Казань. В других городах ПВЗ завести на         первых порах нельзя, в таком случае необходимо вернуть ошибку.
   * Результатом добавления ПВЗ должна стать новая запись в хранилище данных

4. Добавление информации о приёмке товаров:
   * Только авторизованный пользователь системы с ролью «сотрудник ПВЗ» может инициировать приём товара.
   * Результатом инициации приёма товаров должна стать новая запись в хранилище данных.
   * Если же предыдущая приёмка товара не была закрыта, то операция по созданию нового приёма товаров невозможна.

5. Добавление товаров в рамках одной приёмки:
   * Только авторизованный пользователь системы с ролью «сотрудник ПВЗ» может добавлять товары после его осмотра.
   * При этом товар должен привязываться к последнему незакрытому приёму товаров в рамках текущего ПВЗ.
   * Если же нет новой незакрытой приёмки товаров, то в таком случае должна возвращаться ошибка, и товар не должен добавляться в систему.
   * Если последняя приёмка товара все ещё не была закрыта, то результатом должна стать привязка товара к текущему ПВЗ и текущей приёмке с последующем добавлением данных в хранилище.

6. Удаление товаров в рамках не закрытой приёмки:
   * Только авторизованный пользователь системы с ролью «сотрудник ПВЗ» может удалять товары, которые были добавлены
   в рамках текущей приёмки на ПВЗ.
   * Удаление товара возможно только до закрытия приёмки, после этого уже невозможно изменить состав товаров, которые
   были приняты на ПВЗ.
   * Удаление товаров производится по принципу LIFO, т.е. возможно удалять товары только в том порядке, в котором
   они были добавлены в рамках текущей приёмки.

7. Закрытие приёмки:
   * Только авторизованный пользователь системы с ролью «сотрудник ПВЗ» может закрывать приём товаров.
   * В случае, если приёмка товаров уже была закрыта (или приёма товаров в данном ПВЗ ещё не было), 
   то следует вернуть ошибку.
   * Во всех остальных случаях необходимо обновить данные в хранилище и зафиксировать товары,
   которые были в рамках этой приёмки.

8. Получение данных:
   * Только авторизованный пользователь системы с ролью «сотрудник ПВЗ» или «модератор» может получать эти данные.
   * Необходимо получить список ПВЗ и всю информацию по ним при помощи пагинации.
   * При этом добавить фильтр по дате приёмки товаров, т.е. выводить только те ПВЗ и всю информацию по ним,
